–í–æ—Ç –ø–æ–ª–Ω—ã–π –∏ –∞–∫—Ç—É–∞–ª—å–Ω—ã–π —Å–ø–∏—Å–æ–∫ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π —Ç–≤–æ–µ–≥–æ –±–æ—Ç–∞ –Ω–∞ —Ç–µ–∫—É—â–∏–π –º–æ–º–µ–Ω—Ç ‚Äî –ø–æ —Ä–æ–ª—è–º –∏ —Ñ—É–Ω–∫—Ü–∏—è–º üëá

---

## üë§ –î–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

### üîó –ó–∞–≥—Ä—É–∑–∫–∞ –≤–∏–¥–µ–æ

* –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Å—Å—ã–ª–æ–∫:

  * YouTube (–æ–±—ã—á–Ω—ã–µ –≤–∏–¥–µ–æ)
  * YouTube Shorts (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–æ—Ä–º–∞–ª–∏–∑—É—é—Ç—Å—è)
  * –ü–ª–µ–π–ª–∏—Å—Ç—ã (–ø–æ–¥–¥–µ—Ä–∂–∫–∞ –æ—á–µ—Ä–µ–¥–∏ –∑–∞–¥–∞—á –ø–æ –≤–∏–¥–µ–æ –∏–∑ –ø–ª–µ–π–ª–∏—Å—Ç–∞)
* –ü–æ—Å–ª–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å—Å—ã–ª–∫–∏:

  * –±–æ—Ç –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç **–≤—ã–±–æ—Ä –∫–∞—á–µ—Å—Ç–≤–∞/—Ñ–æ—Ä–º–∞—Ç–∞**
  * –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç **—Ä–µ–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä** (–∏–ª–∏ `~`-–æ—Ü–µ–Ω–∫—É)
  * –ø–æ–º–µ—Ç–∫–∞ **üì¶ ‚Äú–∏–∑ –∫—ç—à–∞‚Äù** –¥–ª—è —É–∂–µ —Å–∫–∞—á–∞–Ω–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤

### üì• –û—á–µ—Ä–µ–¥—å –∑–∞–≥—Ä—É–∑–æ–∫

* –í—Å–µ —Å–∫–∞—á–∏–≤–∞–Ω–∏—è –∏–¥—É—Ç —á–µ—Ä–µ–∑ **–æ–±—â—É—é –æ—á–µ—Ä–µ–¥—å**
* –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç:

  * —Ç–æ—á–Ω—É—é –ø–æ–∑–∏—Ü–∏—é:
    **¬´–í –æ—á–µ—Ä–µ–¥–∏ #7 –∏–∑ 23, –∞ –≤—ã #2 —É —Å–µ–±—è¬ª**
* –õ–∏–º–∏—Ç—ã:

  * –ª–∏–º–∏—Ç –∑–∞–¥–∞—á –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  * –∞–Ω—Ç–∏—Å–ø–∞–º / cooldown –º–µ–∂–¥—É –∑–∞–ø—Ä–æ—Å–∞–º–∏
* –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞:

  * –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–æ—Ä–∫–µ—Ä–æ–≤ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 4)

### ‚ùå –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–≤–æ–∏–º–∏ –∑–∞–¥–∞—á–∞–º–∏

* `/myqueue` ‚Äî –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç **—Ç–æ–ª—å–∫–æ —Å–≤–æ–∏ –∑–∞–¥–∞—á–∏**
* –ö–Ω–æ–ø–∫–∏ —Ä—è–¥–æ–º —Å –∑–∞–¥–∞—á–∞–º–∏:

  * ‚ùå –æ—Ç–º–µ–Ω–∏—Ç—å –∑–∞–¥–∞—á—É (queued / running)
* `/cancel` ‚Äî –æ—Ç–º–µ–Ω–∞ —Ç–µ–∫—É—â–µ–π –∑–∞–¥–∞—á–∏

### ‚ö° –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ

* –£–∂–µ —Å–∫–∞—á–∞–Ω–Ω—ã–µ –≤–∏–¥–µ–æ:

  * –Ω–µ –∫–∞—á–∞—é—Ç—Å—è –ø–æ–≤—Ç–æ—Ä–Ω–æ
  * –æ—Ç–¥–∞—é—Ç—Å—è –º–≥–Ω–æ–≤–µ–Ω–Ω–æ –∏–∑ Telegram cache
  * –ø–æ–º–µ—á–∞—é—Ç—Å—è –∑–Ω–∞—á–∫–æ–º üì¶
* –£–º–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ –∫—ç—à–∞ –ø–æ –≤—Ä–µ–º–µ–Ω–∏ (TTL)

---

## üõÇ –î–æ—Å—Ç—É–ø –∏ –∑–∞—â–∏—Ç–∞

### üîí Whitelist (–±–µ–ª—ã–π —Å–ø–∏—Å–æ–∫)

* –†–µ–∂–∏–º:

  * –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–æ—Å—Ç—É–ø–µ–Ω –≤—Å–µ–º
  * –∞–¥–º–∏–Ω –º–æ–∂–µ—Ç –≤–∫–ª—é—á–∏—Ç—å whitelist
* –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ whitelist:

  * –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ / —É–¥–∞–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏–∑ –±–æ—Ç–∞
  * –≤–∫–ª—é—á–µ–Ω–∏–µ/–≤—ã–∫–ª—é—á–µ–Ω–∏–µ whitelist **–∏–∑ –∞–¥–º–∏–Ω-–º–µ–Ω—é –∫–Ω–æ–ø–∫–∞–º–∏**

### üì¢ –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ –∫–∞–Ω–∞–ª

* –ï—Å–ª–∏ whitelist –≤–∫–ª—é—á—ë–Ω:

  * –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –±–æ—Ç–æ–º, **–µ—Å–ª–∏ –ø–æ–¥–ø–∏—Å–∞–Ω –Ω–∞ —É–∫–∞–∑–∞–Ω–Ω—ã–π –∫–∞–Ω–∞–ª**
* –ë–æ—Ç –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –ø–æ–¥–ø–∏—Å–∫—É –ø–µ—Ä–µ–¥ –ø—Ä–∏—ë–º–æ–º –∑–∞–¥–∞—á

### üö´ –ê–Ω—Ç–∏—Å–ø–∞–º –∏ –ª–∏–º–∏—Ç—ã

* –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —á–∞—Å—Ç–æ—Ç—ã –∑–∞–ø—Ä–æ—Å–æ–≤
* –õ–∏–º–∏—Ç –∑–∞–¥–∞—á –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
* –ó–∞—â–∏—Ç–∞ –æ—Ç –º–∞—Å—Å–æ–≤–æ–≥–æ —Ñ–ª—É–¥–∞ —Å—Å—ã–ª–∫–∞–º–∏

---

## üõ† –î–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ (—á–µ—Ä–µ–∑ –∫–Ω–æ–ø–æ—á–Ω–æ–µ –º–µ–Ω—é)

### üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ (`–°—Ç–∞—Ç—É—Å`)

* –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ:

  * –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
  * —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –∫—ç—à–∞
  * –∑–∞–¥–∞—á –≤ –æ—á–µ—Ä–µ–¥–∏ / –≤ —Ä–∞–±–æ—Ç–µ / –∑–∞–≤–µ—Ä—à—ë–Ω–Ω—ã—Ö / –æ—Ç–º–µ–Ω—ë–Ω–Ω—ã—Ö / —Å –æ—à–∏–±–∫–∞–º–∏
* –¢–µ–∫—É—â–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (WORKERS –∏ —Ç.–¥.)

### üì• –û—á–µ—Ä–µ–¥—å (–∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å)

* –ü—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ—Ö –∞–∫—Ç–∏–≤–Ω—ã—Ö –∑–∞–¥–∞—á
* –ü–∞–≥–∏–Ω–∞—Ü–∏—è –ø–æ 10 –∑–∞–¥–∞—á
* –ò–Ω–ª–∞–π–Ω-–∫–Ω–æ–ø–∫–∏:

  * üöÄ **bump** ‚Äî –ø–æ–¥–Ω—è—Ç—å –∑–∞–¥–∞—á—É –≤ –Ω–∞—á–∞–ª–æ –æ—á–µ—Ä–µ–¥–∏
  * ‚ùå **cancel** ‚Äî –æ—Ç–º–µ–Ω–∏—Ç—å –ª—é–±—É—é –∑–∞–¥–∞—á—É
* –í–∏–¥–Ω–∞ —Ç–æ—á–Ω–∞—è –ø–æ–∑–∏—Ü–∏—è –∫–∞–∂–¥–æ–π –∑–∞–¥–∞—á–∏

### üßπ –û—á–∏—Å—Ç–∫–∞ –∑–∞–¥–∞—á

* –ê–≤—Ç–æ-–æ—á–∏—Å—Ç–∫–∞:

  * `done / canceled` ‚Äî —Å—Ç–∞—Ä—à–µ 7 –¥–Ω–µ–π
  * `failed` ‚Äî —Å—Ç–∞—Ä—à–µ 30 –¥–Ω–µ–π (–¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏)
* –ö–Ω–æ–ø–∫–∞ –∞–¥–º–∏–Ω–∞ **¬´–û—á–∏—Å—Ç–∏—Ç—å —Å—Ç–∞—Ä—ã–µ –∑–∞–¥–∞—á–∏¬ª** (—Ä—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫)

### üß† –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ whitelist

* –í–∫–ª—é—á–∏—Ç—å / –≤—ã–∫–ª—é—á–∏—Ç—å whitelist
* –î–æ–±–∞–≤–∏—Ç—å / —É–¥–∞–ª–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
* –ü–æ–∫–∞–∑ —Ç–µ–∫—É—â–µ–≥–æ —Å–ø–∏—Å–∫–∞

### ‚öôÔ∏è –°–µ—Ä–≤–∏—Å–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è

* –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –≤–æ—Ä–∫–µ—Ä–æ–≤ –æ—á–µ—Ä–µ–¥–∏
* –û—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä–æ–≥–æ –∫—ç—à–∞
* –ë—ã—Å—Ç—Ä—ã–π –¥–æ—Å—Ç—É–ø –∫ –∫–ª—é—á–µ–≤—ã–º –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º

---

## ‚öôÔ∏è –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### üßµ –û—á–µ—Ä–µ–¥—å + –≤–æ—Ä–∫–µ—Ä—ã

* –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –æ—á–µ—Ä–µ–¥—å –≤ Postgres
* –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–µ –≤–æ—Ä–∫–µ—Ä—ã
* –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã –∑–∞–¥–∞—á
* –û—Ç–º–µ–Ω–∞ –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ —Å–∫–∞—á–∏–≤–∞–Ω–∏—è (graceful cancel)

### üß† –•—Ä–∞–Ω–∏–ª–∏—â–µ

* Postgres:

  * users
  * jobs (–æ—á–µ—Ä–µ–¥—å)
  * video_cache
* –û—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö –¥–∞–Ω–Ω—ã—Ö –ø–æ TTL

### üöÄ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏

* yt-dlp —Å –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–º–∏ —Ñ–æ—Ä–º–∞—Ç–∞–º–∏:

  * `bestvideo[ext=mp4]+bestaudio[ext=m4a]/best[ext=mp4]/best`
* –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –±–æ–ª—å—à–∏—Ö —Ñ–∞–π–ª–æ–≤ (—á–µ—Ä–µ–∑ –ª–æ–∫–∞–ª—å–Ω—ã–π Bot API –¥–æ 2GB)
* ffmpeg –¥–ª—è —Å–∫–ª–µ–π–∫–∏

---

## üê≥ –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞

### üì¶ Docker

* `docker-compose`:

  * bot
  * postgres
  * tg-bot-api (–ª–æ–∫–∞–ª—å–Ω—ã–π Telegram Bot API)
* Healthchecks:

  * tg-bot-api —á–µ—Ä–µ–∑ `nc -z`
* Auto-restart –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
* –õ–æ–≥-rotation (—á—Ç–æ–±—ã –ª–æ–≥–∏ –Ω–µ —Ä–∞–∑–¥—É–≤–∞–ª–∏—Å—å)
* `stop_grace_period` ‚Äî –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Å–∫–∞—á–∏–≤–∞–Ω–∏—è –ø—Ä–∏ —Ä–µ—Å—Ç–∞—Ä—Ç–∞—Ö

---

## üß≠ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –∫–æ–º–∞–Ω–¥—ã

| –ö–æ–º–∞–Ω–¥–∞    | –ß—Ç–æ –¥–µ–ª–∞–µ—Ç                         |
| ---------- | ---------------------------------- |
| `/start`   | –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ                        |
| `/myqueue` | –ü–æ–∫–∞–∑ —Å–≤–æ–∏—Ö –∑–∞–¥–∞—á + –∫–Ω–æ–ø–∫–∏ –æ—Ç–º–µ–Ω—ã  |
| `/stats`   | (–µ—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω–æ) –±–∞–∑–æ–≤–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ |
| `/cancel`  | –û—Ç–º–µ–Ω–∞ —Ç–µ–∫—É—â–µ–π –∑–∞–¥–∞—á–∏              |

---

## üöß –ß—Ç–æ –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –¥–∞–ª—å—à–µ (–ø–æ –∂–µ–ª–∞–Ω–∏—é)

* –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –ø–æ —Ä–∞–∑–º–µ—Ä—É/–¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –≤–∏–¥–µ–æ
* –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã –¥–ª—è VIP-–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
* –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –∑–∞–≥—Ä—É–∑–æ–∫ –ø–æ –≤—Ä–µ–º–µ–Ω–∏
* Web-–ø–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
* –û—á–µ—Ä–µ–¥—å –ø–æ –≥—Ä—É–ø–ø–∞–º/—á–∞—Ç–∞–º
* –ü–æ–¥–¥–µ—Ä–∂–∫–∞ TikTok / Instagram / Twitter

---

–ï—Å–ª–∏ —Ö–æ—á–µ—à—å ‚Äî –º–æ–≥—É:

* –æ—Ñ–æ—Ä–º–∏—Ç—å —ç—Ç–æ –≤ README –¥–ª—è GitHub
* —Å–¥–µ–ª–∞—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É ‚ÄúAbout bot‚Äù –≤–Ω—É—Ç—Ä–∏ –±–æ—Ç–∞
* –∏–ª–∏ –¥–æ–±–∞–≤–∏—Ç—å –∫–æ–º–∞–Ω–¥—É `/help` —Å —ç—Ç–∏–º –æ–ø–∏—Å–∞–Ω–∏–µ–º –ø—Ä—è–º–æ –≤ –±–æ—Ç–µ.
