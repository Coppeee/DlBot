–ù–∏–∂–µ ‚Äî **–ø–æ–ª–Ω–∞—è production-–∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è** –ø–æ —É—Å—Ç–∞–Ω–æ–≤–∫–µ –∏ –∑–∞–ø—É—Å–∫—É —Ç–≤–æ–µ–≥–æ Telegram Downloader Bot
(Postgres + –æ—á–µ—Ä–µ–¥—å + self-hosted Bot API + Pornhub plugin)
–Ω–∞ **VDS Ubuntu 24.04 / Debian 12**.

–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è —Ä–∞—Å—Å—á–∏—Ç–∞–Ω–∞ –Ω–∞ ‚Äú—Å –Ω—É–ª—è‚Äù.

---

# üß≠ –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

1. –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ —Å–µ—Ä–≤–µ—Ä—É
2. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Å–∏—Å—Ç–µ–º—ã
3. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Docker
4. –ó–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞
5. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Telegram (BOT_TOKEN + API_ID)
6. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ `.env`
7. Cookies (Pornhub)
8. –ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫
9. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã
10. –ê–≤—Ç–æ–∑–∞–ø—É—Å–∫
11. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ
12. –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ
13. –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
14. –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

---

# 1Ô∏è‚É£ –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ —Å–µ—Ä–≤–µ—Ä—É

### –ú–∏–Ω–∏–º—É–º:

* 1 vCPU
* 1 GB RAM
* 10 GB SSD
* Ubuntu 24.04 –∏–ª–∏ Debian 12

### –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è:

* 2 vCPU
* 2 GB RAM

---

# 2Ô∏è‚É£ –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Å–∏—Å—Ç–µ–º—ã

–ü–æ–¥–∫–ª—é—á–∞–µ–º—Å—è:

```bash
ssh root@IP_–°–ï–†–í–ï–†–ê
```

–û–±–Ω–æ–≤–ª—è–µ–º —Å–∏—Å—Ç–µ–º—É:

```bash
apt update && apt upgrade -y
```

–£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –±–∞–∑–æ–≤—ã–µ –ø–∞–∫–µ—Ç—ã:

```bash
apt install -y curl git nano htop ufw
```

---

# 3Ô∏è‚É£ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Docker

```bash
apt install -y ca-certificates gnupg

install -m 0755 -d /etc/apt/keyrings

curl -fsSL https://download.docker.com/linux/$(. /etc/os-release; echo "$ID")/gpg \
| gpg --dearmor -o /etc/apt/keyrings/docker.gpg

echo \
"deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.gpg] \
https://download.docker.com/linux/$(. /etc/os-release; echo "$ID") \
$(. /etc/os-release; echo "$VERSION_CODENAME") stable" \
| tee /etc/apt/sources.list.d/docker.list > /dev/null

apt update

apt install -y docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin
```

–ü—Ä–æ–≤–µ—Ä–∫–∞:

```bash
docker --version
docker compose version
```

–í–∫–ª—é—á–∞–µ–º –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫:

```bash
systemctl enable docker
```

---

# 4Ô∏è‚É£ –ó–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞

### –í–∞—Ä–∏–∞–Ω—Ç 1 ‚Äî Git:

```bash
git clone https://github.com/–¢–í–û–ô_–†–ï–ü–û/ytbot.git
cd ytbot
```

### –í–∞—Ä–∏–∞–Ω—Ç 2 ‚Äî —á–µ—Ä–µ–∑ SCP:

–ù–∞ —Å–≤–æ—ë–º –ü–ö:

```bash
scp -r ytbot root@IP:/root/
```

–ù–∞ —Å–µ—Ä–≤–µ—Ä–µ:

```bash
cd ytbot
```

---

# 5Ô∏è‚É£ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Telegram

## üîπ 5.1 BOT_TOKEN

1. –û—Ç–∫—Ä–æ–π @BotFather
2. `/newbot`
3. –°–∫–æ–ø–∏—Ä—É–π —Ç–æ–∫–µ–Ω

---

## üîπ 5.2 ADMIN_ID

–ù–∞–ø–∏—à–∏ @userinfobot
–°–∫–æ–ø–∏—Ä—É–π —Å–≤–æ–π ID

---

## üîπ 5.3 TELEGRAM_API_ID –∏ HASH

–ù—É–∂–Ω—ã –¥–ª—è self-hosted Bot API:

1. [https://my.telegram.org](https://my.telegram.org)
2. API development tools
3. –°–æ–∑–¥–∞–π –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
4. –°–∫–æ–ø–∏—Ä—É–π:

   * API ID
   * API Hash

---

# 6Ô∏è‚É£ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ `.env`

```bash
nano .env
```

–ü—Ä–∏–º–µ—Ä –ø–æ–ª–Ω–æ–≥–æ —Ä–∞–±–æ—á–µ–≥–æ `.env`:

```env
BOT_TOKEN=123456:ABCDEF
ADMIN_ID=123456789

TELEGRAM_API_ID=123456
TELEGRAM_API_HASH=abcdef123456abcdef123456abcdef12

EXTRA_SERVICES=botph_plugin
YTDLP_COOKIEFILE=/app/cookies.txt

WORKERS=4
MAX_QUEUE_PER_USER=3
COOLDOWN_SECONDS=5

CACHE_TTL_DAYS=30
JOBS_TTL_DAYS=7
FAILED_TTL_DAYS=30

# Optional whitelist
# REQUIRED_CHANNEL=@yourchannel
# REQUIRED_CHANNEL_LINK=https://t.me/yourchannel
```

–°–æ—Ö—Ä–∞–Ω–∏—Ç—å:
CTRL+O ‚Üí Enter ‚Üí CTRL+X

---

# 7Ô∏è‚É£ Cookies (Pornhub, –µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—à—å)

## –ü–æ–ª—É—á–∏—Ç—å cookies:

1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ "Get cookies.txt"
2. –ó–∞–π—Ç–∏ –Ω–∞ pornhub.com
3. –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ Netscape —Ñ–æ—Ä–º–∞—Ç–µ
4. –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∫–∞–∫:

```
rt.pornhub.com_cookies.txt
```

–ü—Ä–æ–≤–µ—Ä–∫–∞:

```bash
ls -lah
```

Docker —É–∂–µ –º–æ–Ω—Ç–∏—Ä—É–µ—Ç —Ñ–∞–π–ª –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä.

---

# 8Ô∏è‚É£ –ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫

```bash
docker compose up -d --build
```

–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã:

```bash
docker compose ps
```

–î–æ–ª–∂–Ω—ã –±—ã—Ç—å:

* bot
* postgres
* tg-bot-api

---

# 9Ô∏è‚É£ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

–õ–æ–≥–∏ –±–æ—Ç–∞:

```bash
docker compose logs -f bot
```

–ù–∞–ø–∏—à–∏ –±–æ—Ç—É:

```
/start
```

–û—Ç–ø—Ä–∞–≤—å YouTube —Å—Å—ã–ª–∫—É ‚Äî –¥–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å –≤—ã–±–æ—Ä –∫–∞—á–µ—Å—Ç–≤–∞.

---

# üîü –ê–≤—Ç–æ–∑–∞–ø—É—Å–∫

–í docker-compose —É–∂–µ —Å—Ç–æ–∏—Ç:

```
restart: unless-stopped
```

–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –±—É–¥—É—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å—Ç–∞—Ä—Ç–æ–≤–∞—Ç—å –ø–æ—Å–ª–µ reboot.

–ü—Ä–æ–≤–µ—Ä–∫–∞:

```bash
reboot
```

–ü–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏:

```bash
docker compose ps
```

---

# 11Ô∏è‚É£ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–æ—Ç–∞

```bash
git pull
docker compose up -d --build
```

---

# 12Ô∏è‚É£ –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –ë–î

–≠–∫—Å–ø–æ—Ä—Ç:

```bash
docker exec -t ytbot-postgres pg_dump -U ytbot ytbot > backup.sql
```

–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ:

```bash
cat backup.sql | docker exec -i ytbot-postgres psql -U ytbot ytbot
```

---

# 13Ô∏è‚É£ –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)

## üî• –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Firewall

```bash
ufw allow OpenSSH
ufw enable
```

–û—Ç–∫—Ä—ã–≤–∞—Ç—å –ø–æ—Ä—Ç—ã –Ω–µ –Ω—É–∂–Ω–æ ‚Äî –±–æ—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ Telegram.

---

## üîê –°–æ–∑–¥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

```bash
adduser botuser
usermod -aG docker botuser
```

---

## üö´ –û—Ç–∫–ª—é—á–∏—Ç—å root login

```bash
nano /etc/ssh/sshd_config
```

–ò–∑–º–µ–Ω–∏—Ç—å:

```
PermitRootLogin no
```

–ü–µ—Ä–µ–∑–∞–ø—É—Å–∫:

```bash
systemctl restart ssh
```

---

# 14Ô∏è‚É£ –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

## ‚ùå Bot –Ω–µ —Å—Ç–∞—Ä—Ç—É–µ—Ç

–ü—Ä–æ–≤–µ—Ä—å:

```bash
docker compose logs -f bot
```

–û–±—ã—á–Ω–æ –æ—à–∏–±–∫–∞:

* –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π BOT_TOKEN
* –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π TELEGRAM_API_ID / HASH

---

## ‚ùå Postgres –æ—à–∏–±–∫–∞

```bash
docker compose logs -f postgres
```

---

## ‚ùå –í–∏–¥–µ–æ –Ω–µ —Å–∫–∞—á–∏–≤–∞–µ—Ç—Å—è

–ü—Ä–æ–≤–µ—Ä—å:

* cookies –∞–∫—Ç—É–∞–ª—å–Ω—ã
* —Å–µ—Ä–≤–µ—Ä –Ω–µ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω
* –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ RAM

---

# üìä –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è –≤—ã—Å–æ–∫–æ–π –Ω–∞–≥—Ä—É–∑–∫–∏

–ï—Å–ª–∏ –±–æ—Ç –Ω–∞—á–∏–Ω–∞–µ—Ç –∞–∫—Ç–∏–≤–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è:

```env
WORKERS=6
```

–ò —Å–µ—Ä–≤–µ—Ä:

* 4‚Äì8 CPU
* 8 GB RAM

---

# üéØ –ì–æ—Ç–æ–≤–æ

–ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –±–æ—Ç:

* –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å—Ç–∞—Ä—Ç—É–µ—Ç
* —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –æ—á–µ—Ä–µ–¥—å –≤ Postgres
* –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –∑–∞–¥–∞—á–∏ –ø–æ—Å–ª–µ —Ä–µ—Å—Ç–∞—Ä—Ç–∞
* –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç YouTube + Pornhub
* –∏–º–µ–µ—Ç –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å

---

